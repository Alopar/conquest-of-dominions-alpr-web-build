<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conquest of Dominions</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/ui.css">
    <link rel="stylesheet" href="css/game.css">
    <link rel="stylesheet" href="css/screens.css">
</head>
<body>
    <!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="intro-screen" class="screen active">
        <div class="intro-table-container">
            <table class="intro-table">
                <tr>
                    <td colspan="2">
                        <h1 style="font-size:3.5em; color:#cd853f; margin-bottom:32px; text-shadow:2px 2px 8px rgba(0,0,0,0.8); letter-spacing:3px; font-weight:600;">
                            <span style="font-size:1.1em; vertical-align:middle;">üè∞</span> Conquest of Dominions <span style="font-size:1.1em; vertical-align:middle;">‚öîÔ∏è</span>
                        </h1>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="config-section">
                            <div class="config-info">
                                <h3 style="color: #cd853f; margin-bottom: 15px; text-shadow: 1px 1px 2px rgba(0,0,0,0.6);">
                                    ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—è
                                </h3>
                                <div id="file-status" class="file-status"></div>
                            </div>
                            
                            <div class="config-actions">
                                <div class="action-group">
                                    <label for="config-file" class="file-label">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:</label>
                                    <label for="config-file" class="custom-file-btn" id="custom-file-btn">üìÅ –í–´–ë–†–ê–¢–¨ –§–ê–ô–õ</label>
                                    <input type="file" id="config-file" accept=".json" class="file-input">
                                </div>
                                
                                <div class="action-group">
                                    <button class="btn secondary-btn" onclick="downloadSampleConfig()" style="width: 200px;">
                                        üì• –û–ë–†–ê–ó–ï–¶
                                    </button>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div style="display: flex; gap: 20px; justify-content: center; margin-top: 20px;">
                            <button class="btn" onclick="showSettings()" style="width: 200px; font-size:1.1em;">
                                ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                            </button>
                            <button class="btn" onclick="showBestiary()" style="width: 200px; font-size:1.1em;">
                                üêâ –ë–µ—Å—Ç–∏–∞—Ä–∏–π
                            </button>
                            <button class="btn" id="battle-btn" onclick="startBattle()" disabled style="width: 250px; font-size:1.15em;">
                                üö© –ù–∞—á–∞—Ç—å –±–æ–π! üö©
                            </button>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –±–æ—è -->
    <div id="battle-screen" class="screen" style="display: none !important;">
        <div class="menu-bar">
            <div class="menu-left">
                <button class="btn" onclick="showIntro()">–ì–ª–∞–≤–Ω–∞—è</button>
                <button class="btn" onclick="resetBattle()">–ó–∞–Ω–æ–≤–æ</button>
            </div>
        </div>
        
        <div class="main-content">
            <div class="battlefield-container">
                <div class="battlefield-content">
                    <div class="battle-info">
                        <h2>–ü–æ–ª–µ –±–æ—è</h2>
                        <div id="battle-status">–ë–æ–π –≥–æ—Ç–æ–≤ –∫ –Ω–∞—á–∞–ª—É</div>
                        <div class="turn-info">
                            <div id="turn-counter">–•–æ–¥: 1</div>
                        </div>
                    </div>
                    
                    <div class="army-label" id="defenders-label">–ó–∞—â–∏—Ç–Ω–∏–∫–∏</div>
                    <div id="defenders-line" class="army-line"></div>
                    
                    <div class="army-label" id="attackers-label">–ê—Ç–∞–∫—É—é—â–∏–µ</div>
                    <div id="attackers-line" class="army-line"></div>
                    
                    <div class="controls">
                        <button class="btn" onclick="executeStep('attackers')" id="attackers-btn">–•–æ–¥ –ê—Ç–∞–∫—É—é—â–∏—Ö</button>
                        <button class="btn" onclick="executeStep('defenders')" id="defenders-btn">–•–æ–¥ –ó–∞—â–∏—Ç–Ω–∏–∫–æ–≤</button>
                        <button class="btn" onclick="nextTurn()" id="next-turn-btn">–°–ª–µ–¥—É—é—â–∏–π —Ö–æ–¥</button>
                    </div>
                </div>
                
                <!-- –ü–ª–∞—à–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —é–Ω–∏—Ç–µ -->
                <div id="unit-info-panel" class="unit-info-panel">
                    <table class="unit-info-table">
                        <tr>
                            <td class="unit-info-label">–¢–ò–ü: <span class="unit-info-value" id="unit-type"></span></td>
                            <td class="unit-info-label">HP: <span class="unit-info-value" id="unit-hp"></span> ‚ù§Ô∏è</td>
                            <td class="unit-info-label">–£–†–û–ù: <span class="unit-info-value" id="unit-damage"></span> üí•</td>
                            <td class="unit-info-label">–°–¢–ê–¢–£–°: <span class="unit-info-value" id="unit-status"></span></td>
                        </tr>
                    </table>
                </div>
            </div>
            
            <div class="log-panel">
                <h3>–õ–æ–≥ –±–æ—è</h3>
                <div id="battle-log"></div>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div id="settings-screen" class="screen" style="display: none !important;">
        <div class="menu-bar">
            <div class="menu-left">
                <button class="btn" onclick="showIntro()">–ì–ª–∞–≤–Ω–∞—è</button>
            </div>
        </div>
        
        <div class="settings-container">
            <div class="settings-content">
                <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h2>
                
                <div class="settings-layout">
                    <div class="settings-section">
                        <h3>–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
                        <div class="setting-group">
                            <input type="number" id="maxUnitsPerArmy" min="1" max="20" value="10">
                            <label for="maxUnitsPerArmy">–ú–∞–∫—Å–∏–º—É–º —é–Ω–∏—Ç–æ–≤ –≤ –∞—Ä–º–∏–∏</label>
                        </div>
                        <div class="setting-group">
                            <input type="number" id="hitThreshold" min="1" max="20" value="11">
                            <label for="hitThreshold">–ü–æ—Ä–æ–≥ –ø–æ–ø–∞–¥–∞–Ω–∏—è</label>
                        </div>
                        <div class="setting-group">
                            <input type="number" id="criticalHit" min="1" max="20" value="20">
                            <label for="criticalHit">–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ø–∞–¥–∞–Ω–∏–µ</label>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</h3>
                        <div class="setting-group">
                            <div class="custom-checkbox">
                                <input type="checkbox" id="showDetailedLog" checked>
                                <label for="showDetailedLog">–ü–æ–¥—Ä–æ–±–Ω—ã–π –ª–æ–≥</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-actions">
                    <button class="btn" onclick="saveSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button class="btn secondary-btn" onclick="resetSettings()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

        <!-- –≠–∫—Ä–∞–Ω –ë–µ—Å—Ç–∏–∞—Ä–∏–π -->
    <div id="bestiary-screen" class="screen" style="display: none !important;">
        <div class="menu-bar">
            <div class="menu-left">
                <button class="btn" onclick="backToIntroFromBestiary()">–ì–ª–∞–≤–Ω–∞—è</button>
            </div>
        </div>
        
        <div class="settings-container">
            <div class="settings-content">
                <h2>üêâ –ë–µ—Å—Ç–∏–∞—Ä–∏–π</h2>
                <div style="margin-bottom: 18px; display: flex; gap: 18px; justify-content: center;">
                    <input type="file" id="monsters-file" accept=".json" style="display:none" onchange="uploadMonstersConfigFile(this)">
                    <button class="btn" onclick="document.getElementById('monsters-file').click()">üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥</button>
                    <button class="btn secondary-btn" onclick="downloadMonstersConfig()">üíæ –°–∫–∞—á–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥</button>
                </div>
                <div class="bestiary-table-wrapper">
                    <table class="bestiary-table unit-info-table">
                        <thead>
                            <tr>
                                <th class="icon-cell">üë§</th>
                                <th>–ò–º—è</th>
                                <th>ID</th>
                                <th>‚ù§Ô∏è HP</th>
                                <th>üí• –£—Ä–æ–Ω</th>
                            </tr>
                        </thead>
                        <tbody id="bestiary-table">
                            <tr><td colspan="5">–ó–∞–≥—Ä—É–∑–∫–∞...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JavaScript —Ñ–∞–π–ª–æ–≤ -->
    <script src="js/monsters.js"></script>
    <script src="js/bestiary.js"></script>
    <script src="js/config.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/game.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>